@if (state.appStatus() === 'review' || state.appStatus() === 'translated') {
  <div class="h-full border-l border-gray-200 bg-white">
    <!-- 變更清單 -->
    @if (activeTab() === 'changes') {
      <div class="h-full overflow-auto">
        <div class="p-4 border-b border-gray-200 bg-gray-50">
          <h3 class="font-semibold text-gray-800">變更清單</h3>
          <p class="text-sm text-gray-600 mt-1">
            共 {{ changes().length }} 處變更
          </p>
        </div>

        <div class="p-4 space-y-3">
          @for (item of changes(); track $index) {
            <div class="p-3 bg-gray-50 rounded-lg border border-gray-200">
              <div class="flex items-start justify-between mb-2">
                <span class="text-xs font-medium text-gray-500">
                  {{ item.change.added ? '新增' : '刪除' }}
                </span>
                <span
                  [class]="
                    'text-xs font-medium ' + getChangeStatusColor(item.index)
                  "
                >
                  {{ getChangeStatus(item.index) }}
                </span>
              </div>
              <div [class]="item.change.added ? 'diff-added' : 'diff-removed'">
                "{{ item.change.value }}"
              </div>
            </div>
          }

          @if (changes().length === 0) {
            <div class="text-center text-gray-500 py-8">沒有變更</div>
          }
        </div>
      </div>
    }

    <!-- 翻譯結果 -->
    @if (activeTab() === 'translation') {
      <div class="h-full overflow-auto">
        <div class="p-4 border-b border-gray-200 bg-gray-50">
          <h3 class="font-semibold text-gray-800">翻譯結果</h3>
          <p class="text-sm text-gray-600 mt-1">中英文對照</p>
        </div>

        <div class="p-4 space-y-4">
          <div>
            <h4 class="text-sm font-semibold text-gray-700 mb-2">中文定稿</h4>
            <div
              class="p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm leading-relaxed whitespace-pre-wrap"
            >
              {{ state.finalText() }}
            </div>
          </div>

          <div>
            <h4 class="text-sm font-semibold text-gray-700 mb-2">英文翻譯</h4>
            <div
              class="p-4 bg-blue-50 rounded-lg border border-blue-200 text-sm leading-relaxed whitespace-pre-wrap"
            >
              {{ state.translatedText() }}
            </div>
          </div>
        </div>
      </div>
    }
  </div>
}
